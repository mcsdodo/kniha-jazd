# Task: i18n - Slovak + English UI

## Goal

Add internationalization support with Slovak as primary language and English as secondary option. Users can switch languages in Settings, with OS language detection as default.

## Decisions Made

| Question | Decision |
|----------|----------|
| Languages | Slovak (primary) + English |
| Selection method | OS detection with manual override in Settings |
| Library | typesafe-i18n (type-safe, good DX) |
| Backend translations | None - backend returns keys, frontend translates |
| PDF export | Follows UI language (frontend passes translated labels to Rust) |
| Scope | Translate everything at once |

## Architecture

### Frontend (SvelteKit + typesafe-i18n)

- `src/lib/i18n/` folder with typesafe-i18n setup
- `sk/index.ts` - Slovak translations (base language)
- `en/index.ts` - English translations
- Language stored in SQLite `settings` table
- Svelte store (`localeStore`) synced with backend
- All components use `$LL.key()` syntax

### Backend (Rust)

- Returns error **keys**, not human-readable text
- Frontend resolves keys to translated strings
- PDF export receives translated labels as parameter

### Language Detection Flow

1. App starts → check saved `locale` in settings table
2. If none → detect via `navigator.language.startsWith('sk') ? 'sk' : 'en'`
3. Initialize typesafe-i18n with detected/saved locale
4. Settings page shows language dropdown, saves to DB on change

## Translation Structure

```typescript
const sk = {
  common: {
    save: "Uložiť",
    cancel: "Zrušiť",
    delete: "Vymazať",
    loading: "Načítavam...",
  },
  home: {
    activeVehicle: "Aktívne vozidlo",
    exportForPrint: "Export pre tlač",
    noVehicle: "Žiadne vozidlo",
    // ...
  },
  stats: {
    totalDriven: "Celkovo najazdené",
    fuel: "PHM",
    consumption: "Spotreba",
    deviation: "Odchýlka",
    remaining: "Zostatok",
  },
  vehicle: {
    name: "Názov",
    licensePlate: "ŠPZ",
    tankSize: "Objem nádrže",
    tpConsumption: "Spotreba (TP)",
  },
  trips: { /* grid labels */ },
  settings: { /* settings page */ },
  export: { /* PDF labels */ },
  errors: { /* error codes from backend */ },
};
```

## File Structure

```
src/lib/i18n/
├── i18n-types.ts    (generated by typesafe-i18n)
├── i18n-util.ts     (generated)
├── sk/index.ts      (Slovak - base)
└── en/index.ts      (English)
```
